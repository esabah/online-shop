ñ	
UC:\Projects\Sendeo\Assestment\online-shop\Common\DataAccess\Repository\IRepository.cs
	namespace 	
Common
 
. 

Repository 
{ 
public		 

	interface		 
IRepository		  
<		  !
TEntity		! (
>		( )
where		* /
TEntity		0 7
:		8 9
class		: ?
{

 
TEntity 
GetById 
( 
int 
id 
) 
;  
IEnumerable 
< 
TEntity 
> 
GetAll #
(# $
)$ %
;% &
TEntity 
Create 
( 
TEntity 
entity %
)% &
;& '
TEntity 
Update 
( 
TEntity 
entity %
)% &
;& '
void 
Delete 
( 
int 
id 
) 
; 
void 
Commit 
( 
) 
; 
Task 
< 
int 
> 
CommitAsync 
( 
) 
;  
} 
} Ý
XC:\Projects\Sendeo\Assestment\online-shop\Common\DataAccess\Repository\RepositoryBase.cs
	namespace		 	
Common		
 
.		 

Repository		 
{

 
public 

class 
RepositoryBase 
<  
T  !
>! "
:# $
IRepository% 0
<0 1
T1 2
>2 3
where4 9
T: ;
:< =
class> C
{ 
	protected 
readonly 
	DbContext $

_dbContext% /
;/ 0
public 
RepositoryBase 
( 
	DbContext '
	dbContext( 1
)1 2
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
T 
Create 
( 
T 
entity  
)  !
{ 	

_dbContext 
. 
Set 
< 
T 
> 
( 
) 
.  
Add  #
(# $
entity$ *
)* +
;+ ,
return 
entity 
; 
} 	
public 
void 
Delete 
( 
int 
id !
)! "
{ 	

_dbContext 
. 
Set 
< 
T 
> 
( 
) 
.  
Remove  &
(& '
GetById' .
(. /
id/ 1
)1 2
)2 3
;3 4
} 	
public 
IEnumerable 
< 
T 
> 
GetAll $
($ %
)% &
{   	
return!! 

_dbContext!! 
.!! 
Set!! !
<!!! "
T!!" #
>!!# $
(!!$ %
)!!% &
.!!& '
ToList!!' -
(!!- .
)!!. /
;!!/ 0
}"" 	
public$$ 
T$$ 
GetById$$ 
($$ 
int$$ 
id$$ 
)$$  
{%% 	
var&& 
entity&& 
=&& 

_dbContext&& #
.&&# $
Set&&$ '
<&&' (
T&&( )
>&&) *
(&&* +
)&&+ ,
.&&, -
Find&&- 1
(&&1 2
id&&2 4
)&&4 5
;&&5 6
if'' 
('' 
entity'' 
=='' 
null'' 
)'' 
{(( 
throw)) 
new)) 
ArgumentException)) +
())+ ,
$")), .
$str)). G
{))G H
id))H J
}))J K
"))K L
)))L M
;))M N
}** 
else++ 
return++ 
entity++ 
;++ 
},, 	
public.. 
T.. 
Update.. 
(.. 
T.. 
entity..  
)..  !
{// 	

_dbContext00 
.00 
Set00 
<00 
T00 
>00 
(00 
)00 
.00  
Update00  &
(00& '
entity00' -
)00- .
;00. /
return11 
entity11 
;11 
}22 	
public44 
void44 
Commit44 
(44 
)44 
{55 	

_dbContext66 
.66 
SaveChanges66 "
(66" #
)66# $
;66$ %
}77 	
public99 
async99 
Task99 
<99 
int99 
>99 
CommitAsync99 *
(99* +
)99+ ,
{:: 	
return;; 
await;; 

_dbContext;; #
.;;# $
SaveChangesAsync;;$ 4
(;;4 5
);;5 6
;;;6 7
}<< 	
}== 
}>> ú	
bC:\Projects\Sendeo\Assestment\online-shop\Common\MessageQueue\EventMessages\CustomerCreateEvent.cs
	namespace 	
Common
 
. 
MessageQueue 
. 
EventMessages +
{ 
public		 

class		 
CustomerCreateEvent		 $
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public 
string 
Surname 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
null. 2
!2 3
;3 4
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
PhoneNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ‹
_C:\Projects\Sendeo\Assestment\online-shop\Common\MessageQueue\EventMessages\OrderCreateEvent.cs
	namespace 	
Common
 
. 
MessageQueue 
. 
EventMessages +
{ 
public		 

class		 
OrderCreateEvent		 !
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
DateTime 
	OrderDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
CustomerName "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
null3 7
!7 8
;8 9
public 
string 
CustomerSurName %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
null6 :
!: ;
;; <
public 
string 
CustomerEmail #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
null4 8
!8 9
;9 :
public 
string 
CustomerPhoneNumber )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
=8 9
null: >
!> ?
;? @
public 
string 
BillingAddress $
{% &
get' *
;* +
set, /
;/ 0
}1 2
=3 4
null5 9
!9 :
;: ;
public 
string 
ShippingAddress %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
null6 :
!: ;
;; <
public 
IEnumerable 
< "
OrderDetailCreateEvent 1
>1 2
?2 3
OrderDetails4 @
{A B
getC F
;F G
setH K
;K L
}M N
} 
public 

class "
OrderDetailCreateEvent '
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
OrderId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
	ProductId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ProductName !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
null2 6
!6 7
;7 8
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} â
aC:\Projects\Sendeo\Assestment\online-shop\Common\MessageQueue\EventMessages\ProductCreateEvent.cs
	namespace 	
Common
 
. 
MessageQueue 
. 
EventMessages +
{ 
public		 

class		 
ProductCreateEvent		 #
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} 